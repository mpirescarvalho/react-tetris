{"version":3,"sources":["images/background.jpg","components/StartPage/index.js","hooks/useWindowDimensions.js","components/StatusRow/index.js","components/LoseGame/index.js","components/Stage/index.js","components/Center/index.js","utils/Utils.js","components/Game/index.js","hooks/useInterval.js","components/Tetris/index.js","index.js","App.js"],"names":["module","exports","StyledStartPage","styled","div","StartButton","button","StartPage","startClick","onClick","getWindowDimensions","window","width","innerWidth","height","innerHeight","Container","props","backgroundColor","borderSize","portrait","padding","margin","Title","Value","StatusRow","title","value","CenterOverlay","LoseContainer","pixelSize","theme3d","ContainerStatus","ContainerButton","Button","LoseGame","status","restartClick","score","level","lines","Game","background","ContainerNext","Next","StyledStage","Center","Row","stage","Pixel","React","memo","fill","color","zIndex","paused","topBloco","Color","lighten","hint","playerColor","alpha","ContainerSwitch","Stage","lose","map","player","others","useState","setPixelSize","setPortrait","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","useWindowDimensions","setTheme3d","nextRender","setNextRender","stageRef","useRef","pixelSizeHeight","pixelSizeWidth","next","bloco","trimRowBloco","sumColumn","forEach","row","y","rowSum","pixel","push","x","trimBloco","newRow","getRenderizacaoBloco","current","focus","key","onChange","checked","offColor","onColor","uncheckedIcon","checkedIcon","ref","playerFill","pos","playerHint","PrintPlayerInMap","newMap","arr","slice","length","pixelY","pixelX","initialMap","Array","colors","I","O","T","J","L","S","Z","getRandomBloco","blocos","Math","floor","random","getRandomPlayer","JSON","parse","stringify","STAGE_WIDTH","setMap","setPlayer","down","setDown","pause","setPause","Date","now","tick","setTick","hintPlayer","setHintPlayer","spaceReleased","setSpaceReleased","setlines","setScore","setLevel","dragX","setDragX","dragY","setDragY","gameOver","setGameOver","nextLevel","nextLevelScore","console","log","loseGame","drop","newPos","getNewPlayerPos","mapWithPlayer","checkMap","newPlayer","validatePosition","rotatePlayer","clonedPlayer","mtrx","_","index","column","reverse","forwardDown","playerCopy","useCallback","rowsClear","clear","mapY","quant","bonusLevel","bonusRows","mapX","calculateHintPlayer","hintBloco","hintPosition","movement","callback","delay","savedCallback","id","setInterval","clearInterval","useInterval","bind","useDrag","mx","my","velocity","abs","filterTaps","lockDirection","onBlur","onFocus","tabIndex","onKeyUp","keyCode","onKeyDown","Tetris","runing","setRuning","stopClick","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.f4c7279e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/background.6255a470.jpg\";","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst StyledStartPage = styled.div`\r\n\twidth: 100vw;\r\n\theight: 100vh;\r\n\toverflow: hidden;\r\n\tbackground-color: #e3b505;\r\n`;\r\n\r\nconst StartButton = styled.button`\r\n\tfont-size: 2.2em;\r\n\tfont-family: \"ZCOOL QingKe HuangYou\", cursive;\r\n\t/* border: 2px solid #222; */\r\n\tborder: none;\r\n\tpadding: 30px 100px;\r\n\tbackground-color: #fff;\r\n\tposition: absolute;\r\n\ttop: 50%;\r\n\tleft: 50%;\r\n\ttransform: translate(-50%, -50%);\r\n\tvertical-align: middle;\r\n\ttext-decoration: none;\r\n\ttransition: all 0.5s;\r\n\tcolor: #95190c;\r\n\tborder-right: 1px solid #eee;\r\n\tborder-radius: 2px;\r\n\tborder-bottom: 1px solid #ccc;\r\n\r\n\t:focus {\r\n\t\toutline: 0;\r\n\t}\r\n\r\n\t:hover {\r\n\t\tmargin-left: 5px;\r\n\t\tmargin-top: 5px;\r\n\t\t::after {\r\n\t\t\tright: -5px;\r\n\t\t\ttop: 2px;\r\n\t\t\twidth: 5px;\r\n\t\t}\r\n\t\t::before {\r\n\t\t\tright: -3px;\r\n\t\t\theight: 5px;\r\n\t\t}\r\n\t}\r\n\r\n\t::after {\r\n\t\tcontent: \"\";\r\n\t\theight: 100%;\r\n\t\twidth: 10px;\r\n\t\tbackground-color: #eee;\r\n\t\tright: -10px;\r\n\t\ttop: 5px;\r\n\t\ttransform: skewY(45deg);\r\n\t\tposition: absolute;\r\n\t\ttransition: all 0.5s;\r\n\t}\r\n\r\n\t::before {\r\n\t\tcontent: \"\";\r\n\t\theight: 10px;\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #ccc;\r\n\t\tright: -5px;\r\n\t\ttop: 95px;\r\n\t\ttransform: skewX(45deg);\r\n\t\tposition: absolute;\r\n\t\ttransition: all 0.5s;\r\n\t}\r\n`;\r\n\r\nconst StartPage = ({ startClick }) => {\r\n\treturn (\r\n\t\t<StyledStartPage>\r\n\t\t\t<StartButton onClick={startClick}>Start</StartButton>\r\n\t\t</StyledStartPage>\r\n\t);\r\n};\r\nexport default StartPage;\r\n","import { useState, useEffect } from 'react';\r\n\r\nfunction getWindowDimensions() {\r\n  const { innerWidth: width, innerHeight: height } = window;\r\n  return {\r\n    width,\r\n    height\r\n  };\r\n}\r\n\r\nexport default function useWindowDimensions() {\r\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      setWindowDimensions(getWindowDimensions());\r\n    }\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  return windowDimensions;\r\n}","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n\tbackground-color: ${props =>\r\n\t\tprops.backgroundColor ? props.backgroundColor : \"black\"};\r\n\ttransition: background-color 0.5s;\r\n\tborder: ${props => (props.borderSize ? props.borderSize : \"3\")}px solid white;\r\n\t${props => !props.portrait && `width: 100%;`}\r\n\tfont-family: \"ZCOOL QingKe HuangYou\", cursive;\r\n\tpadding: ${props => (props.padding ? props.padding : \"15\")}px\r\n\t\t${props => (props.portrait ? props.padding / 2 : 0)}px; /*15*/\r\n\tmargin-bottom: ${props => (props.margin ? props.margin : \"10\")}px; /*10*/\r\n`;\r\n\r\nconst Title = styled.div`\r\n\twidth: 100%;\r\n\ttext-align: center;\r\n\tcolor: white;\r\n`;\r\n\r\nconst Value = styled.div`\r\n\twidth: 100%;\r\n\ttext-align: center;\r\n\tcolor: white;\r\n`;\r\n\r\nconst StatusRow = ({\r\n\ttitle,\r\n\tvalue,\r\n\tpadding,\r\n\tmargin,\r\n\tborderSize,\r\n\tportrait,\r\n\tbackgroundColor\r\n}) => (\r\n\t<Container\r\n\t\tportrait={portrait}\r\n\t\tpadding={padding}\r\n\t\tmargin={margin}\r\n\t\tborderSize={borderSize}\r\n\t\tbackgroundColor={backgroundColor}\r\n\t>\r\n\t\t<Title>{title}</Title>\r\n\t\t<Value>{value}</Value>\r\n\t</Container>\r\n);\r\n\r\nexport default StatusRow;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst CenterOverlay = styled.div`\r\n\tposition: fixed;\r\n\ttop: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n\twidth: 100vw;\r\n\theight: 100vh;\r\n\tz-index: 100;\r\n\tbackground-color: rgba(0,0,0,0.5);\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n`;\r\n\r\nconst LoseContainer = styled.div`\r\n\ttransition: all 0.2s;\r\n\twidth: ${props => props.pixelSize * (props.portrait ? 12 : 20)}px;\r\n\theight: ${props => props.pixelSize * (props.portrait ? 20 : 10)}px;\r\n\tborder: ${props => props.pixelSize / 10}px solid white;\r\n\tbackground-color: ${props => props.theme3d ? '#444' : '#000'};\r\n\tfont-size: ${props => props.pixelSize}px;\r\n\tfont-family: \"ZCOOL QingKe HuangYou\", cursive;\r\n\tcolor: white;\r\n\tdisplay: flex;\r\n\tflex-flow: column;\r\n`;\r\n\r\nconst Title = styled.div`\r\n\twidth: 100%;\r\n\tfont-size: 2em;\r\n\tpadding: ${props => props.portrait ? 10 : 2}% 0;\r\n\ttext-align: center;\r\n\tborder-bottom: 1px solid white;\r\n\tflex: 0 1 auto;\r\n`;\r\n\r\nconst ContainerStatus = styled.div`\r\n\tflex: 1 1 auto;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: space-evenly;\r\n`;\r\n\r\nconst StatusRow = styled.div`\r\n\ttext-align: center;\r\n`;\r\n\r\nconst ContainerButton = styled.div`\r\n\tflex: 0 1 auto;\r\n\tpadding: ${props => props.portrait ? 10 : 2}% 0;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tborder-top: 1px solid white;\r\n`;\r\n\r\nconst Button = styled.button`\r\n\twidth: ${props => props.pixelSize * 10}px;\r\n\theight: ${props => props.pixelSize * 2}px;\r\n\tfont-size: ${props => props.pixelSize / 1.5}px;\r\n\tfont-family: \"ZCOOL QingKe HuangYou\", cursive;\r\n\tcolor: white;\r\n\tborder: ${props => props.pixelSize / 20}px solid white;\r\n\tborder-radius: ${props => props.pixelSize / 10}px;\r\n\tbackground-color: rgba(0,0,0,0);\r\n\ttransition: all 0.5s;\r\n\r\n\t:hover {\r\n\t\tcolor: #222;\r\n\t\tborder: ${props => props.pixelSize / 20}px solid rgba(0,0,0,0);\r\n\t\tbackground-color: white;\r\n\t}\r\n\r\n`;\r\n\r\nconst LoseGame = ({status, portrait, pixelSize, theme3d, restartClick}) => (\r\n\t<CenterOverlay>\r\n\t\t<LoseContainer portrait={portrait} pixelSize={pixelSize} theme3d={theme3d}>\r\n\t\t\t<Title portrait={portrait}>Game Over</Title>\r\n\t\t\t<ContainerStatus>\r\n\t\t\t\t<StatusRow>SCORE: {status.score}</StatusRow>\r\n\t\t\t\t<StatusRow>LEVEL: {status.level}</StatusRow>\r\n\t\t\t\t<StatusRow>LINES: {status.lines}</StatusRow>\r\n\t\t\t</ContainerStatus>\r\n\t\t\t<ContainerButton portrait={portrait}>\r\n\t\t\t\t<Button pixelSize={pixelSize} onClick={() => restartClick()}>Restart</Button>\r\n\t\t\t</ContainerButton>\r\n\t\t</LoseContainer>\r\n\t</CenterOverlay>\r\n);\r\n\r\nexport default LoseGame;","import React, { useState, useEffect, useRef } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Switch from \"react-switch\";\r\n\r\nimport useWindowDimensions from \"../../hooks/useWindowDimensions\";\r\nimport background from \"../../images/background.jpg\";\r\nimport StatusRow from \"../StatusRow\";\r\nimport LoseGame from '../LoseGame';\r\n\r\nimport Color from \"color\";\r\n\r\nconst Game = styled.div`\r\n\twidth: 100vw;\r\n\theight: ${props => (props.portrait ? \"95\" : \"100\")}vh;\r\n\tdisplay: flex;\r\n\tflex-direction: ${props => (props.portrait ? \"column\" : \"row\")};\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tbackground-image: url(${background});\r\n\tbackground-size: cover;\r\n\tbackground-position: center;\r\n`;\r\n\r\nconst ContainerNext = styled.div`\r\n\t${props =>\r\n\t\t!props.portrait && `height: ${props.pixelSize * 18 + (18 / 3) * 1}px;`}\r\n\t${props => props.portrait && `width: ${props.pixelSize * 10 + (10 / 3) * 1}px;`}\r\n\tmargin-right: ${props => (props.portrait ? 0 : props.pixelSize / 3)}px;\r\n\tmargin-bottom: ${props => (props.portrait ? props.pixelSize / 3 : 0)}px;\r\n\tdisplay: flex;\r\n\tflex-direction: ${props => (props.portrait ? \"row\" : \"column\")};\r\n\tjustify-content: ${props => (props.portrait ? \"space-between\" : \"flex-start\")};\r\n\talign-items: center;\r\n`;\r\n\r\nconst Next = styled.div`\r\n\twidth: ${props => props.pixelSize * 3}px;\r\n\theight: ${props => props.pixelSize * 3}px;\r\n\tbackground-color: ${props => (props.theme3d ? \"#444\" : \"black\")};\r\n\ttransition: background-color 0.5;\r\n\tborder: ${props => props.pixelSize / 10}px solid white;\r\n\toverflow: hidden;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tmargin-bottom: ${props => (props.portrait ? 0 : props.pixelSize / 3)}px;\r\n\tmargin-right: ${props => (!props.portrait ? 0 : props.pixelSize / 3)}px;\r\n`;\r\n\r\nconst StyledStage = styled.div`\r\n\tborder: ${props => props.pixelSize / 10}px solid white;\r\n\tbackground-color: ${props => (props.theme3d ? \"#444\" : \"black\")};\r\n\ttransition: background-color 0.5s;\r\n\toverflow: hidden;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n`;\r\n\r\nconst Center = styled.div`\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n`;\r\n\r\nconst Row = styled.div`\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tjustify-content: center;\r\n\theight: ${props => (props.stage ? props.pixelSize : props.pixelSize / 1.6)}px;\r\n`;\r\n\r\nconst Pixel = React.memo(styled.div`\r\n\twidth: ${props => (props.stage ? props.pixelSize : props.pixelSize / 1.6)}px;\r\n\theight: ${props => (props.stage ? props.pixelSize : props.pixelSize / 1.6)}px;\r\n\tbackground-color: ${props => (props.fill === 1 ? props.color : \"inherited\")};\r\n\tposition: relative;\r\n\tz-index: ${props => props.zIndex};\r\n\r\n\t${props =>\r\n\t\tprops.paused &&\r\n\t\t`\r\n\t\ttransition: all 1s;\r\n\t`};\r\n\r\n\t${props =>\r\n\t\tprops.fill &&\r\n\t\tprops.theme3d &&\r\n\t\t`;\r\n\t\tbox-shadow: ${props.pixelSize / 4.16}px ${props.pixelSize /\r\n\t\t\t4.16}px ${props.pixelSize / 5.55}px #222${\r\n\t\t\tprops.topBloco\r\n\t\t\t\t? `, 0 ${-props.pixelSize / 4.16}px 0 ${Color(props.color).lighten(0.2)}`\r\n\t\t\t\t: \"\"\r\n\t\t} \r\n\t`};\r\n\r\n\t${props =>\r\n\t\t!props.theme3d &&\r\n\t\t`\r\n\t\tborder-left: 1px solid ${\r\n\t\t\tprops.stage || props.fill || props.hint ? \"#222\" : \"black\"\r\n\t\t};\r\n\t\tborder-top: 1px solid ${\r\n\t\t\tprops.stage || props.fill || props.hint ? \"#222\" : \"black\"\r\n\t\t};\t\r\n\t`};\r\n\r\n\t${props =>\r\n\t\tprops.hint &&\r\n\t\t`\r\n\t\tborder: 1px solid ${Color(props.playerColor).alpha(0.5)};\r\n\t\tbackground-color: rgba(255,255,255,0.1);\r\n\t`};\r\n`);\r\n\r\nconst ContainerSwitch = styled.div`\r\n\t${props =>\r\n\t\tprops.portrait &&\r\n\t\t`\r\n\t\theight: 100%;\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: flex-end;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: flex-end;\r\n\t`};\r\n`;\r\n\r\nconst ContainerStatus = styled.div`\r\n\twidth: ${props => props.pixelSize * 8}px;\r\n\t${props =>\r\n\t\t!props.portrait && `height: ${props.pixelSize * 18 + (18 / 3) * 1}px;`}\r\n\t${props => props.portrait && `width: ${props.pixelSize * 10 + (10 / 3) * 1}px;`}\r\n\tmargin-left: ${props => (props.portrait ? 0 : props.pixelSize / 3)}px;\r\n\tmargin-top: ${props => (props.portrait ? props.pixelSize / 3 : 0)}px;\r\n\tdisplay: flex;\r\n\tflex-direction: ${props => (props.portrait ? \"row\" : \"column\")};\r\n\talign-items: center;\r\n\tjustify-content: ${props => (props.portrait ? \"space-between\" : \"flex-start\")};\r\n\tfont-size: ${props => props.pixelSize}px;\r\n`;\r\n\r\nconst getRenderizacaoBloco = bloco => {\r\n\tlet trimRowBloco = [];\r\n\tlet sumColumn = {};\r\n\tbloco.forEach((row, y) => {\r\n\t\tlet rowSum = 0;\r\n\t\trow.forEach(pixel => (rowSum = rowSum + pixel));\r\n\t\tif (rowSum > 0) trimRowBloco.push(row);\r\n\t\trow.forEach((pixel, x) => {\r\n\t\t\tsumColumn[x] = (sumColumn[x] ? sumColumn[x] : 0) + pixel;\r\n\t\t});\r\n\t});\r\n\tlet trimBloco = [];\r\n\ttrimRowBloco.forEach((row, y) => {\r\n\t\tlet newRow = [];\r\n\t\trow.forEach((pixel, x) => {\r\n\t\t\tif (sumColumn[x] > 0) newRow.push(pixel);\r\n\t\t});\r\n\t\ttrimBloco.push(newRow);\r\n\t});\r\n\treturn trimBloco;\r\n};\r\n\r\nconst Stage = ({ lose, restartClick, map, player, hint, status, paused, ...others }) => {\r\n\tconst [pixelSize, setPixelSize] = useState(30);\r\n\tconst [portrait, setPortrait] = useState(false);\r\n\tconst { width, height } = useWindowDimensions();\r\n\tconst [theme3d, setTheme3d] = useState(false);\r\n\tconst [nextRender, setNextRender] = useState();\r\n\tconst stageRef = useRef(null);\r\n\r\n\tuseEffect(() => {\r\n\t\tlet pixelSizeHeight = height / 20;\r\n\t\tlet pixelSizeWidth = width / 32;\r\n\t\tif (portrait) {\r\n\t\t\tpixelSizeHeight = height / 26;\r\n\t\t\tpixelSizeWidth = width / 12;\r\n\t\t}\r\n\t\tsetPixelSize(\r\n\t\t\tpixelSizeWidth < pixelSizeHeight ? pixelSizeWidth : pixelSizeHeight\r\n\t\t);\r\n\t\tsetPortrait(height > width);\r\n\t}, [width, height, portrait]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!player.next) return;\r\n\t\tsetNextRender(getRenderizacaoBloco(player.next.bloco));\r\n\t}, [player.next]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!lose) {\r\n\t\t\tstageRef.current.focus();\r\n\t\t}\r\n\t}, [lose]);\r\n\r\n\tuseEffect(() => {\r\n\t\tstageRef.current.focus();\r\n\t}, [theme3d]);\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Game portrait={portrait}>\r\n\t\t\t\t{nextRender && (\r\n\t\t\t\t\t<ContainerNext portrait={portrait} pixelSize={pixelSize}>\r\n\t\t\t\t\t\t<Next portrait={portrait} theme3d={theme3d} pixelSize={pixelSize}>\r\n\t\t\t\t\t\t\t{nextRender.map((row, y) => (\r\n\t\t\t\t\t\t\t\t<Row pixelSize={pixelSize} key={`row-${y}`}>\r\n\t\t\t\t\t\t\t\t\t{row.map((pixel, x) => {\r\n\t\t\t\t\t\t\t\t\t\tlet topBloco = pixel && (!nextRender[y - 1] || !nextRender[y - 1][x]);\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<Pixel\r\n\t\t\t\t\t\t\t\t\t\t\t\tpaused={paused}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttheme3d={theme3d}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttopBloco={topBloco}\r\n\t\t\t\t\t\t\t\t\t\t\t\tzIndex={y}\r\n\t\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize}\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={`pixel-${x}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tfill={pixel}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={player.next.color}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Next>\r\n\t\t\t\t\t\t<ContainerSwitch portrait={portrait}>\r\n\t\t\t\t\t\t\t<Switch\r\n\t\t\t\t\t\t\t\twidth={pixelSize * 2}\r\n\t\t\t\t\t\t\t\theight={pixelSize / 1.2}\r\n\t\t\t\t\t\t\t\tonChange={setTheme3d}\r\n\t\t\t\t\t\t\t\tchecked={theme3d}\r\n\t\t\t\t\t\t\t\toffColor=\"#000\"\r\n\t\t\t\t\t\t\t\tonColor=\"#444\"\r\n\t\t\t\t\t\t\t\tuncheckedIcon={\r\n\t\t\t\t\t\t\t\t\t<Center>\r\n\t\t\t\t\t\t\t\t\t\t<Pixel\r\n\t\t\t\t\t\t\t\t\t\t\ttheme3d={false}\r\n\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize / 3}\r\n\t\t\t\t\t\t\t\t\t\t\tstage=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\tfill={1}\r\n\t\t\t\t\t\t\t\t\t\t\tcolor={\"#e54b4b\"}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Center>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tcheckedIcon={\r\n\t\t\t\t\t\t\t\t\t<Center>\r\n\t\t\t\t\t\t\t\t\t\t<Pixel\r\n\t\t\t\t\t\t\t\t\t\t\ttheme3d=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize / 3}\r\n\t\t\t\t\t\t\t\t\t\t\tstage=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\tfill={1}\r\n\t\t\t\t\t\t\t\t\t\t\tcolor={\"#e54b4b\"}\r\n\t\t\t\t\t\t\t\t\t\t\ttopBloco=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Center>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</ContainerSwitch>\r\n\t\t\t\t\t</ContainerNext>\r\n\t\t\t\t)}\r\n\t\t\t\t{map && (\r\n\t\t\t\t\t<StyledStage ref={stageRef} {...others} theme3d={theme3d} pixelSize={pixelSize}>\r\n\t\t\t\t\t\t{map.map((row, y) => (\r\n\t\t\t\t\t\t\t<Row stage=\"true\" pixelSize={pixelSize} key={`row-${y}`}>\r\n\t\t\t\t\t\t\t\t{row.map((pixel, x) => {\r\n\t\t\t\t\t\t\t\t\tlet playerFill =\r\n\t\t\t\t\t\t\t\t\t\tplayer.bloco.bloco[y - player.pos[0]] &&\r\n\t\t\t\t\t\t\t\t\t\tplayer.bloco.bloco[y - player.pos[0]][x - player.pos[1]];\r\n\t\t\t\t\t\t\t\t\tlet playerHint =\r\n\t\t\t\t\t\t\t\t\t\thint.bloco.bloco[y - hint.pos[0]] &&\r\n\t\t\t\t\t\t\t\t\t\thint.bloco.bloco[y - hint.pos[0]][x - hint.pos[1]];\r\n\t\t\t\t\t\t\t\t\tlet topBloco =\r\n\t\t\t\t\t\t\t\t\t\t(playerFill || pixel.fill) &&\r\n\t\t\t\t\t\t\t\t\t\t(!player.bloco.bloco[y - player.pos[0] - 1] ||\r\n\t\t\t\t\t\t\t\t\t\t\t!player.bloco.bloco[y - player.pos[0] - 1][x - player.pos[1]]) &&\r\n\t\t\t\t\t\t\t\t\t\t(!map[y - 1] || !map[y - 1][x].fill);\r\n\t\t\t\t\t\t\t\t\tlet zIndex = !playerFill && !pixel.fill && playerHint ? 99 : y;\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Pixel\r\n\t\t\t\t\t\t\t\t\t\t\tpaused={paused}\r\n\t\t\t\t\t\t\t\t\t\t\ttheme3d={theme3d}\r\n\t\t\t\t\t\t\t\t\t\t\thint={!pixel.fill && !playerFill && playerHint}\r\n\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize}\r\n\t\t\t\t\t\t\t\t\t\t\tstage=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\tkey={`pixel-${x}`}\r\n\t\t\t\t\t\t\t\t\t\t\tfill={pixel.fill || playerFill}\r\n\t\t\t\t\t\t\t\t\t\t\tcolor={playerFill ? player.bloco.color : pixel.color}\r\n\t\t\t\t\t\t\t\t\t\t\tplayerColor={player.bloco.color}\r\n\t\t\t\t\t\t\t\t\t\t\ttopBloco={topBloco}\r\n\t\t\t\t\t\t\t\t\t\t\tzIndex={zIndex}\r\n\t\t\t\t\t\t\t\t\t\t></Pixel>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</StyledStage>\r\n\t\t\t\t)}\r\n\t\t\t\t{status && (\r\n\t\t\t\t\t<ContainerStatus portrait={portrait} pixelSize={pixelSize}>\r\n\t\t\t\t\t\t<StatusRow\r\n\t\t\t\t\t\t\tbackgroundColor={theme3d ? \"#444\" : \"black\"}\r\n\t\t\t\t\t\t\tportrait={portrait}\r\n\t\t\t\t\t\t\tborderSize={pixelSize / 10}\r\n\t\t\t\t\t\t\tmargin={pixelSize / 3}\r\n\t\t\t\t\t\t\tpadding={pixelSize / 2}\r\n\t\t\t\t\t\t\ttitle=\"SCORE\"\r\n\t\t\t\t\t\t\tvalue={status.score}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<StatusRow\r\n\t\t\t\t\t\t\tbackgroundColor={theme3d ? \"#444\" : \"black\"}\r\n\t\t\t\t\t\t\tportrait={portrait}\r\n\t\t\t\t\t\t\tborderSize={pixelSize / 10}\r\n\t\t\t\t\t\t\tmargin={pixelSize / 3}\r\n\t\t\t\t\t\t\tpadding={pixelSize / 2}\r\n\t\t\t\t\t\t\ttitle=\"LEVEL\"\r\n\t\t\t\t\t\t\tvalue={status.level}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<StatusRow\r\n\t\t\t\t\t\t\tbackgroundColor={theme3d ? \"#444\" : \"black\"}\r\n\t\t\t\t\t\t\tportrait={portrait}\r\n\t\t\t\t\t\t\tborderSize={pixelSize / 10}\r\n\t\t\t\t\t\t\tmargin={pixelSize / 3}\r\n\t\t\t\t\t\t\tpadding={pixelSize / 2}\r\n\t\t\t\t\t\t\ttitle=\"LINES\"\r\n\t\t\t\t\t\t\tvalue={status.lines}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</ContainerStatus>\r\n\t\t\t\t)}\r\n\t\t\t</Game>\r\n\t\t\t{ lose && \r\n\t\t\t\t<LoseGame portrait={portrait} restartClick={restartClick} status={status} pixelSize={pixelSize} theme3d={theme3d}>\r\n\t\t\t\t</LoseGame>}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Stage;\r\n","import styled from \"styled-components\";\r\n\r\nconst Center = styled.div`\r\n\twidth: 100vw;\r\n\theight: 100vh;\r\n\tborder: 1px solid red;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n`;\r\n\r\nexport default Center;\r\n","export const PrintPlayerInMap = (player, map) => {\r\n  var newMap = map.map(arr => arr.slice());\r\n  for (let y = 0; y < player.bloco.bloco.length; y++)\r\n    for (let x = 0; x < player.bloco.bloco.length; x++)\r\n      if (player.bloco.bloco[y][x] === 1) {\r\n        const pixelY = player.pos[0] + y;\r\n        const pixelX = player.pos[1] + x;\r\n        newMap[pixelY][pixelX] = { fill: 1, color: player.bloco.color };\r\n      }\r\n  return newMap;\r\n};","import React, { useState, useEffect } from \"react\";\r\nimport { useDrag } from \"react-use-gesture\";\r\nimport BarLoader from \"react-spinners/BarLoader\";\r\n\r\nimport Stage from \"../Stage\";\r\nimport { useInterval } from \"../../hooks/useInterval\";\r\nimport Center from \"../Center\";\r\n\r\nimport { PrintPlayerInMap } from \"../../utils/Utils\";\r\n\r\n//TODO: Alterar OnClick (rotatePlayer) para OnFastClick (criar hook)\r\n//TODO: Organização do componente \"Game\" (Separar codigo em hooks, outros components e funcoes)\r\n//TODO: Dar um tempo quando o bloco estiver no chão, mas o usuário mexendo\r\n\r\nconst STAGE_HEIGHT = 18;\r\nconst STAGE_WIDTH = 10;\r\n\r\nconst initialMap = [...new Array(STAGE_HEIGHT)].map(() =>\r\n\t[...new Array(STAGE_WIDTH)].map(() => ({ fill: 0, color: [] }))\r\n);\r\n\r\nconst colors = [\r\n\t\"#e54b4b\",\r\n\t\"#9a031e\",\r\n\t\"#fcdc4d\",\r\n\t\"#005397\",\r\n\t\"#0bbcd6\",\r\n\t\"#20ad65\",\r\n\t\"#f8ebee\"\r\n];\r\n\r\nconst I = {\r\n\tbloco: [\r\n\t\t[0, 0, 0, 0],\r\n\t\t[1, 1, 1, 1],\r\n\t\t[0, 0, 0, 0],\r\n\t\t[0, 0, 0, 0]\r\n\t]\r\n};\r\n\r\nconst O = {\r\n\tbloco: [\r\n\t\t[1, 1],\r\n\t\t[1, 1]\r\n\t]\r\n};\r\n\r\nconst T = {\r\n\tbloco: [\r\n\t\t[0, 0, 0],\r\n\t\t[1, 1, 1],\r\n\t\t[0, 1, 0]\r\n\t]\r\n};\r\n\r\nconst J = {\r\n\tbloco: [\r\n\t\t[0, 1, 0],\r\n\t\t[0, 1, 0],\r\n\t\t[1, 1, 0]\r\n\t]\r\n};\r\n\r\nconst L = {\r\n\tbloco: [\r\n\t\t[0, 1, 0],\r\n\t\t[0, 1, 0],\r\n\t\t[0, 1, 1]\r\n\t]\r\n};\r\n\r\nconst S = {\r\n\tbloco: [\r\n\t\t[0, 1, 1],\r\n\t\t[1, 1, 0],\r\n\t\t[0, 0, 0]\r\n\t]\r\n};\r\n\r\nconst Z = {\r\n\tbloco: [\r\n\t\t[1, 1, 0],\r\n\t\t[0, 1, 1],\r\n\t\t[0, 0, 0]\r\n\t]\r\n};\r\n\r\nconst getRandomBloco = () => {\r\n\tconst blocos = [I, O, T, J, L, S, Z];\r\n\tconst bloco = blocos[Math.floor(Math.random() * blocos.length)];\r\n\tbloco.color = colors[Math.floor(Math.random() * colors.length)];\r\n\treturn bloco;\r\n};\r\nconst getRandomPlayer = player => {\r\n\tlet bloco, next;\r\n\tif (player)\r\n\t\tif (player.next) {\r\n\t\t\tbloco = JSON.parse(JSON.stringify(player.next));\r\n\t\t\tnext = getRandomBloco();\r\n\t\t}\r\n\tif (!bloco) bloco = getRandomBloco();\r\n\tif (!next) next = getRandomBloco();\r\n\tconst pos = [0, Math.floor(STAGE_WIDTH / 2 - 2 / 2)];\r\n\treturn { pos, bloco, next };\r\n};\r\n\r\nconst Game = () => {\r\n\tconst [map, setMap] = useState(initialMap);\r\n\tconst [player, setPlayer] = useState();\r\n\tconst [down, setDown] = useState(false);\r\n\tconst [pause, setPause] = useState(false);\r\n\tconst [tick, setTick] = useState(Date.now());\r\n\tconst [hintPlayer, setHintPlayer] = useState();\r\n\tconst [spaceReleased, setSpaceReleased] = useState(true);\r\n\tconst [lines, setlines] = useState(0);\r\n\tconst [score, setScore] = useState(0);\r\n\tconst [level, setLevel] = useState(1);\r\n\tconst [dragX, setDragX] = useState(0);\r\n\tconst [dragY, setDragY] = useState(0);\r\n\tconst [gameOver, setGameOver] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst levelBaseScore = 1000;\r\n\t\tconst nextLevel = level + 1;\r\n\t\tconst nextLevelScore =\r\n\t\t\t(levelBaseScore * nextLevel * nextLevel * nextLevel) / 5;\r\n\t\tconsole.log(\"Current level: \", level);\r\n\t\tconsole.log(\"Score to next level:\", nextLevelScore);\r\n\t\tconsole.log(\"Remaining: \", nextLevelScore - score);\r\n\t\tif (score >= nextLevelScore) setLevel(level + 1);\r\n\t}, [level, score]);\r\n\r\n\tconst restartGame = () => {\r\n\t\tsetMap(initialMap); //TODO: lose game\r\n\t\tsetlines(0);\r\n\t\tsetScore(0);\r\n\t\tsetLevel(1);\r\n\t\tsetGameOver(false);\r\n\t}\r\n\r\n\tconst loseGame = () => {\r\n\t\tsetGameOver(true);\r\n\t};\r\n\r\n\tconst drop = () => {\r\n\t\tif (!player) {\r\n\t\t\tsetPlayer(getRandomPlayer());\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetPlayer(player => {\r\n\t\t\tconst newPos = getNewPlayerPos(\"down\");\r\n\t\t\tif (player.pos === newPos) {\r\n\t\t\t\tsetMap(map => {\r\n\t\t\t\t\tconst mapWithPlayer = PrintPlayerInMap(player, map);\r\n\t\t\t\t\tconst mapCleared = checkMap(mapWithPlayer);\r\n\t\t\t\t\treturn mapCleared;\r\n\t\t\t\t});\r\n\t\t\t\tconst newPlayer = getRandomPlayer(player);\r\n\t\t\t\tif (!validatePosition(newPlayer.pos, newPlayer.bloco)) loseGame();\r\n\t\t\t\treturn newPlayer;\r\n\t\t\t}\r\n\t\t\treturn { ...player, pos: newPos };\r\n\t\t});\r\n\t};\r\n\r\n\tconst rotatePlayer = () => {\r\n\t\tconst clonedPlayer = JSON.parse(JSON.stringify(player));\r\n\t\tlet mtrx = clonedPlayer.bloco.bloco.map((_, index) =>\r\n\t\t\tclonedPlayer.bloco.bloco.map(column => column[index])\r\n\t\t);\r\n\t\tmtrx = mtrx.map(row => row.reverse());\r\n\t\tif (validatePosition(player.pos, { bloco: mtrx }))\r\n\t\t\tsetPlayer({ ...player, bloco: { ...player.bloco, bloco: mtrx } });\r\n\t};\r\n\r\n\tconst keyUp = ({ keyCode }) => {\r\n\t\tif (pause || gameOver)\r\n\t\t\treturn;\r\n\t\tconst THRESHOLD = 80;\r\n\t\t// Activate the interval again when user releases down arrow.\r\n\t\tif (keyCode === 40) {\r\n\t\t\tsetDown(false);\r\n\t\t\tif (Date.now() - tick <= THRESHOLD) drop();\r\n\t\t}\r\n\t\tif (keyCode === 32) setSpaceReleased(true);\r\n\t};\r\n\r\n\tconst forwardDown = () => {\r\n\t\tif (pause || gameOver)\r\n\t\t\treturn;\r\n\t\tsetPlayer(player => {\r\n\t\t\tconst playerCopy = JSON.parse(JSON.stringify(player));\r\n\t\t\tplayerCopy.pos = [...hintPlayer.pos];\r\n\t\t\tsetMap(map => {\r\n\t\t\t\tconst mapWithPlayer = PrintPlayerInMap(playerCopy, map);\r\n\t\t\t\tconst mapCleared = checkMap(mapWithPlayer);\r\n\t\t\t\treturn mapCleared;\r\n\t\t\t});\r\n\t\t\tconst newPlayer = getRandomPlayer(player);\r\n\t\t\tif (!validatePosition(newPlayer.pos, newPlayer.bloco)) loseGame();\r\n\t\t\treturn newPlayer;\r\n\t\t});\r\n\t};\r\n\r\n\tconst keyDown = ({ keyCode }) => {\r\n\t\tif (pause || gameOver)\r\n\t\t\treturn;\r\n\t\tswitch (keyCode) {\r\n\t\t\tcase 37:\r\n\t\t\t\tsetPlayer(player => ({ ...player, pos: getNewPlayerPos(\"left\") }));\r\n\t\t\t\tbreak;\r\n\t\t\tcase 38:\r\n\t\t\t\trotatePlayer();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 39:\r\n\t\t\t\tsetPlayer(player => ({ ...player, pos: getNewPlayerPos(\"right\") }));\r\n\t\t\t\tbreak;\r\n\t\t\tcase 40:\r\n\t\t\t\tsetTick(Date.now());\r\n\t\t\t\tsetDown(true);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 32:\r\n\t\t\t\tif (spaceReleased) {\r\n\t\t\t\t\tsetSpaceReleased(false);\r\n\t\t\t\t\tforwardDown();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\tconst checkMap = React.useCallback(\r\n\t\tmap => {\r\n\t\t\tlet rowsClear = [];\r\n\t\t\tmap.forEach((row, y) => {\r\n\t\t\t\tlet clear = true;\r\n\t\t\t\trow.forEach((pixel, x) => {\r\n\t\t\t\t\tif (pixel.fill === 0) clear = false;\r\n\t\t\t\t});\r\n\t\t\t\tif (clear) rowsClear.push(y);\r\n\t\t\t});\r\n\t\t\tif (rowsClear.length > 0) {\r\n\t\t\t\tlet newMap = map.slice();\r\n\t\t\t\trowsClear.forEach(y => {\r\n\t\t\t\t\tfor (let mapY = newMap.length - 1; mapY >= 0; mapY--)\r\n\t\t\t\t\t\tif (mapY <= y)\r\n\t\t\t\t\t\t\tif (mapY > 0) newMap[mapY] = newMap[mapY - 1];\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tnewMap[mapY] = [...new Array(STAGE_WIDTH)].map(() => ({\r\n\t\t\t\t\t\t\t\t\tfill: 0,\r\n\t\t\t\t\t\t\t\t\tcolor: []\r\n\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t});\r\n\t\t\t\tsetlines(quant => quant + rowsClear.length);\r\n\t\t\t\tconst bonusLevel = 100 * (level * level);\r\n\t\t\t\tconst bonusRows = 40 * (rowsClear.length * rowsClear.length - 1);\r\n\t\t\t\tsetScore(score => score + 300 * rowsClear.length + bonusRows + bonusLevel);\r\n\t\t\t\treturn newMap;\r\n\t\t\t}\r\n\t\t\treturn map;\r\n\t\t},\r\n\t\t[level]\r\n\t);\r\n\r\n\tconst validatePosition = React.useCallback(\r\n\t\t(pos, bloco) => {\r\n\t\t\tfor (let y = 0; y < bloco.bloco.length; y++)\r\n\t\t\t\tfor (let x = 0; x < bloco.bloco[y].length; x++)\r\n\t\t\t\t\tif (bloco.bloco[y][x] === 1) {\r\n\t\t\t\t\t\tlet mapY = pos[0] + y;\r\n\t\t\t\t\t\tlet mapX = pos[1] + x;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tmapY > STAGE_HEIGHT ||\r\n\t\t\t\t\t\t\tmapX < 0 ||\r\n\t\t\t\t\t\t\tmapX > STAGE_WIDTH ||\r\n\t\t\t\t\t\t\t!map[mapY] ||\r\n\t\t\t\t\t\t\t!map[mapY][mapX] ||\r\n\t\t\t\t\t\t\tmap[mapY][mapX].fill === 1\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t[map]\r\n\t);\r\n\r\n\tconst calculateHintPlayer = React.useCallback(\r\n\t\tplayer => {\r\n\t\t\tconst hintBloco = JSON.parse(JSON.stringify(player.bloco));\r\n\t\t\tlet hintPosition = [...player.pos];\r\n\t\t\twhile (validatePosition([hintPosition[0] + 1, hintPosition[1]], hintBloco))\r\n\t\t\t\thintPosition = [hintPosition[0] + 1, hintPosition[1]];\r\n\t\t\treturn { pos: hintPosition, bloco: hintBloco };\r\n\t\t},\r\n\t\t[validatePosition]\r\n\t);\r\n\r\n\tconst getNewPlayerPos = React.useCallback(\r\n\t\tmovement => {\r\n\t\t\tlet newPos;\r\n\t\t\tif (!player) return;\r\n\t\t\tif (movement === \"down\") newPos = [player.pos[0] + 1, player.pos[1]];\r\n\t\t\tif (movement === \"left\") newPos = [player.pos[0], player.pos[1] - 1];\r\n\t\t\tif (movement === \"right\") newPos = [player.pos[0], player.pos[1] + 1];\r\n\t\t\tif (!validatePosition(newPos, player.bloco)) return player.pos;\r\n\t\t\treturn newPos;\r\n\t\t},\r\n\t\t[player, validatePosition]\r\n\t);\r\n\r\n\tuseInterval(\r\n\t\t() => {\r\n\t\t\tdrop();\r\n\t\t},\r\n\t\t(pause || gameOver) ? null : down ? 50 : 450 - (level - 1) * 20\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!player) return;\r\n\t\tsetHintPlayer(calculateHintPlayer(player));\r\n\t}, [player, calculateHintPlayer]);\r\n\r\n\tconst bind = useDrag(\r\n\t\t({ down, movement: [mx, my], velocity }) => {\r\n\t\t\tconst THRESHOLD = 20;\r\n\t\t\tconst FORCE_THRESHOLD = 1;\r\n\t\t\tif (down) {\r\n\t\t\t\tif (Math.abs(mx - dragX) > THRESHOLD) {\r\n\t\t\t\t\tif (mx - dragX > 0)\r\n\t\t\t\t\t\tsetPlayer(player => ({ ...player, pos: getNewPlayerPos(\"right\") }));\r\n\t\t\t\t\telse setPlayer(player => ({ ...player, pos: getNewPlayerPos(\"left\") }));\r\n\t\t\t\t\tsetDragX(mx);\r\n\t\t\t\t}\r\n\t\t\t\tif (Math.abs(my - dragY) > THRESHOLD) {\r\n\t\t\t\t\tif (velocity > FORCE_THRESHOLD) {\r\n\t\t\t\t\t\tif (spaceReleased) {\r\n\t\t\t\t\t\t\tsetSpaceReleased(false);\r\n\t\t\t\t\t\t\tforwardDown();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (my - dragY > 0) drop();\r\n\t\t\t\t\tsetDragY(my);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsetDragX(0);\r\n\t\t\t\tsetDragY(0);\r\n\t\t\t\tsetSpaceReleased(true);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{ filterTaps: true, lockDirection: true }\r\n\t);\r\n\r\n\tif (!player || !map || !hintPlayer)\r\n\t\treturn (\r\n\t\t\t<Center>\r\n\t\t\t\t<BarLoader color={\"#C41212\"} />\r\n\t\t\t</Center>\r\n\t\t);\r\n\treturn (\r\n\t\t<Stage\r\n\t\t\tlose={gameOver}\r\n\t\t\trestartClick={() => restartGame()}\r\n\t\t\tmap={map}\r\n\t\t\tplayer={player}\r\n\t\t\thint={hintPlayer}\r\n\t\t\tpaused={pause}\r\n\t\t\tstatus={{ lines, score, level }}\r\n\t\t\tonBlur={() => setPause(true)}\r\n\t\t\tonFocus={() => setPause(false)}\r\n\t\t\ttabIndex=\"0\"\r\n\t\t\tonKeyUp={keyUp}\r\n\t\t\tonKeyDown={keyDown}\r\n\t\t\tonClick={() => rotatePlayer()}\r\n\t\t\t{...bind()}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default Game;\r\n","import { useEffect, useRef } from \"react\";\r\n\r\nexport function useInterval(callback, delay) {\r\n  const savedCallback = useRef();\r\n\r\n  // Remember the latest callback.\r\n  useEffect(() => {\r\n    savedCallback.current = callback;\r\n  }, [callback]);\r\n\r\n  // Set up the interval.\r\n  useEffect(() => {\r\n    function tick() {\r\n      savedCallback.current();\r\n    }\r\n    if (delay !== null) {\r\n      let id = setInterval(tick, delay);\r\n      return () => clearInterval(id);\r\n    }\r\n  }, [delay]);\r\n}\r\n","import React, { useState } from \"react\";\r\n\r\nimport StartPage from \"../StartPage\";\r\nimport Game from \"../Game\";\r\n\r\nconst Tetris = () => {\r\n\tconst [runing, setRuning] = useState(true);\r\n\treturn runing ? (\r\n\t\t<Game stopClick={() => setRuning(false)} />\r\n\t) : (\r\n\t\t<StartPage startClick={() => setRuning(true)} />\r\n\t);\r\n};\r\n\r\nexport default Tetris;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport \"./index.css\";\r\n\r\nimport App from \"./App\";\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(<App />, rootElement);\r\n","import React from \"react\";\r\nimport \"./styles.css\";\r\n\r\nimport Tetris from \"./components/Tetris\";\r\n\r\nexport default function App() {\r\n  return <Tetris />;\r\n}\r\n"],"sourceRoot":""}